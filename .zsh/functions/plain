#!/bin/zsh

plain() {
  local cipher=/home/mustaqim/Library/.cipher
  local mount=/home/mustaqim/Library/.plain
  if (( ! $# )); then
    gocryptfs -q $cipher $mount -o -allow_other
  else
    case $1 in
      hide)
        fusermount -u $mount
        ;;
      show)
        if [ $mount(NF) ]; then
          vifm $mount
        else
          gocryptfs -q $cipher $mount -o -allow_other && vifm $mount
        fi
        ;;
      move)
        fd . ~/Library/Downloads/.var -E '*.part' -x mv "{}" ~/Library/.plain/
        ;;
    esac
  fi
}

plain "$@"
